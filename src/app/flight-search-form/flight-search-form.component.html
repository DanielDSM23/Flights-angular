<div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 -mt-20 relative z-10 max-w-5xl mx-auto" (click)="onComboBoxBlur(comboBoxStateFrom,comboBoxStateTo)">
    <div defaultValue="flights" class="flex flex-col gap-4 w-full">
        <div class="w-full">
            <ul class="flex rounded-xl items-center text-sm font-medium text-center bg-gray-200 max-h-12 p-1" id="default-styled-tab" data-tabs-toggle="#default-styled-tab-content" data-tabs-active-classes="text-gray-900 bg-white hover:text-gray-700 border-transparent" data-tabs-inactive-classes="text-gray-900 hover:text-gray-700 border-transparent hover:border-gray-300" role="tablist">
                <li class="grow" role="presentation">
                    <button class="w-full text-body text-sm px-5 py-1.5 rounded-full" id="profile-styled-tab" data-tabs-target="#styled-profile" type="button" role="tab" aria-controls="profile" aria-selected="false" value="flights">Vols</button>
                </li>
                <li class="grow" role="presentation">
                    <button class="w-full text-body text-sm px-5 py-1.5 rounded-full" id="dashboard-styled-tab" data-tabs-target="#styled-dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="false" value="hotels">Destinations</button>
                </li>
                <li class="grow" role="presentation">
                    <button class="w-full text-body text-sm px-5 py-1.5 rounded-full" id="settings-styled-tab" data-tabs-target="#styled-settings" type="button" role="tab" aria-controls="settings" aria-selected="false" value="packages">Voyages</button>
                </li>
            </ul>
        </div>
        <div id="default-styled-tab-content">
            <div class="hidden p-4 rounded-lg " id="styled-profile" role="tabpanel" aria-labelledby="profile-tab" value="flights">
                <div class="flex flex-wrap mb-4 gap-4">
                        <label>
                            <input type="radio" name="tripOption" id="roundTrip" class="peer hidden" value="Round Trip" checked/>
                            <div class="min-w-25 text-body text-sm px-5 py-1.5 border border-gray-200 rounded-md cursor-pointer p-2 peer-checked:bg-gray-900 peer-checked:text-white hover:bg-gray-700 hover:text-white">Round Trip</div>
                        </label>
                        <label>
                            <input type="radio" name="tripOption" id="oneway" class="peer hidden" value="One Way"/>
                            <div class="min-w-25 text-body text-sm px-5 py-1.5 border border-gray-200 rounded-md cursor-pointer p-2 peer-checked:bg-gray-900 peer-checked:text-white hover:bg-gray-700 hover:text-white">One Way</div>
                        </label>
                        <label>
                            <input type="radio" name="tripOption" id="multiDestination" class="peer hidden" value="Multi Destination"/>
                            <div class="min-w-25 text-body text-sm px-5 py-1.5 border border-gray-200 rounded-md cursor-pointer p-2 peer-checked:bg-gray-900 peer-checked:text-white hover:bg-gray-700 hover:text-white">Multi Destination</div>
                        </label>
                </div>
                <form id="default-tab-content" [formGroup]="flightForm" (ngSubmit)="onSubmit()" autocomplete="off">
                    <!-- <input type="text" formControlName="from">
                    <input type="text" formControlName="to"> -->
                    <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- {/* From */} -->
                        <div class="relative space-y-2">
                            <Label for="combo-input-from">From</Label>
                            <div class="mb-0">
                                <lucide-angular [img]="mapPin" class="absolute left-1.5 top-4.5 h-4 w-4 text-gray-400"></lucide-angular>
                                <input 
                                (click)="onFocusSearch(comboBoxStateFrom, $event)"
                                type="text"
                                id="combo-input-from"
                                
                                formControlName="from"
                                (input)="onSearchAirport($event)"
                                placeholder="New York (JFK)" 
                                class="bg-gray-100 pl-10 rounded-md p-2 text-md border border-gray-300 w-full" />
                            </div>
                            <ul
                            id="combo-menu-from"
                            role="listbox"
                            aria-label="combo box options"
                            [class.hidden]="comboBoxStateFrom()"
                            class="w-full absolute hidden overflow-hidden bg-white border rounded-b-md shadow-md border-gray-100 border-t-0"
                            >
                            @for(airport of filteredairportList(); track airport.attributes; let index = $index){
                                
                                <li
                                id="option-{{index}}"
                                class="flex items-center p-3 text-sm cursor-pointer gap-4 text-base-600 hover:bg-base-50 hover:bg-gray-200"
                                role="option"
                                aria-selected="false"
                                (click)="handleComboBoxFromClick($event)"
                                
                                >
                                    <lucide-angular [img]="plane" class="size-4 text-gray-400"></lucide-angular>
                                    <!-- use Pipe here -->
                                    {{airport.attributes.name}}
                                </li>
                            }@empty {<li>There are no items.</li>}
                            
                            </ul>
                        </div>
    
                        <!-- {/* To */} -->
                        <div id="combo-box" class="relative space-y-2">
                            <Label for="combo-input-to">To</Label>
                            <div class="mb-0">
                                <lucide-angular [img]="mapPin" class="absolute left-1.5 top-4.5 h-4 w-4 text-gray-400"></lucide-angular>
                                <input
                                    id="combo-input-to"
                                    (click)="onFocusSearch(comboBoxStateTo, $event)"
                                    formControlName="to"
                                    placeholder="London (LHR)"
                                    (input)="onSearchAirport($event)"
                                    class="bg-gray-100 pl-10 rounded-md p-2 text-md border border-gray-300 w-full"
                                    type="text" />
                            </div>
                            <ul
                            id="combo-menu-to"
                            role="listbox"
                            aria-label="combo box options"
                            class="w-full absolute hidden overflow-hidden bg-white border rounded-b-md shadow-md border-gray-100 border-t-0"
                            [class.hidden]="comboBoxStateTo()"
                            >
                            @for(airport of filteredairportList(); track airport.attributes; let index = $index){
                                
                                <li
                                id="option-{{index}}"
                                class="flex items-center p-3 text-sm cursor-pointer gap-4 text-base-600 hover:bg-base-50 hover:bg-gray-200"
                                role="option"
                                aria-selected="false"
                                (click)="handleComboBoxToClick($event)"
                                >
                                    <lucide-angular [img]="plane" class="size-4 text-gray-400"></lucide-angular>
                                    <!-- use Pipe here -->
                                    {{airport.attributes.name}}
                                </li>
                            }@empty {<li>There are no items.</li>}
                            </ul>
                        </div>

                        <!-- @if round trip here-->
                        <div class="space-y-2 col-span-2">
                            <span class="text-black">Departure</span>
                            <div id="date-range-picker" date-rangepicker class="flex items-center" datepicker-format="dd/mm/yyyy">
                                <div class="relative">
                                    <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                        <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                            fill="currentColor" viewBox="0 0 20 20">
                                            <path
                                                d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                        </svg>
                                    </div>
                                    <input id="datepicker-range-start" formControlName="start" type="text" (changeDate)="handleStartDate($event)"
                                        class="bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5"
                                        placeholder="Select date start">
                                </div>
                                <span class="mx-2 text-black">to</span>
                                <div class="relative">
                                    <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                        <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                            fill="currentColor" viewBox="0 0 20 20">
                                            <path
                                                d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                        </svg>
                                    </div>
                                    <input id="datepicker-range-end" formControlName="end" type="text" (changeDate)="handleEndDate($event)"
                                        class="bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5"
                                        placeholder="Select date end">
                                </div>
                            </div>
                        </div>
    
                        <!-- @if one way trip here  -->
                        <div class="space-y-2">
                            <!-- <Label>Return</Label>
                                    <Popover>
                                        <PopoverTrigger asChild>
                                            <app-button
                                            [variant]="outline"
                                            class="w-full justify-start text-left"
                                            >
                                            <CalendarIcon class="mr-2 h-4 w-4" />
                                            {returnDate ? format(returnDate, "PPP") : "Select date"}
                                            </app-button>
                                        </PopoverTrigger>
                                        <PopoverContent class="w-auto p-0" align="start">
                                            <Calendar
                                            mode="single"
                                            selected={returnDate}
                                            onSelect={setReturnDate}
                                            initialFocus
                                            />
                                        </PopoverContent>
                                    </Popover> -->
                            
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mt-3">
                        <div class="space-y-2">
                            <label for="passengerNumber">Passengers</label>
                            <select formControlName="passengerNumber" class="max-h-10 bg-gray-100 text-popover-foreground w-full overflow-x-hidden overflow-y-auto rounded-md border shadow-md" id="passengerNumber">
                                <option value="1">1 Passenger</option>
                                <option value="2">2 Passengers</option>
                                <option value="3">3 Passengers</option>
                                <option value="4">4 Passengers</option>
                                <option value="5">5+ Passengers</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label for="ticketClass">Class</label>
                            <select formControlName="ticketClass" class="max-h-10 bg-gray-100 text-popover-foreground w-full overflow-x-hidden overflow-y-auto rounded-md border shadow-md" id="ticketClass">
                                <option value="Economy">Economy</option>
                                <option value="Premium Economy">Premium Economy</option>
                                <option value="Business">Business</option>
                                <option value="First Class">First Class</option>
                            </select>
                        </div>
                        <div class="flex items-end space-y-2">
                            <button type="submit" class="w-full text-white min-h-10 max-h-10 bg-gray-900 font-semibold hover:bg-gray-700 font-large rounded-md text-sm px-5 py-1.5">Rechercher les vols</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="hidden p-4 rounded-lg" id="styled-dashboard" role="tabpanel" aria-labelledby="dashboard-tab" value="hotels">
                <div class="text-center py-12 text-gray-500">
                    <p>Hotel search coming soon...</p>
                </div>
            </div>
            <div class="hidden p-4 rounded-lg" id="styled-settings" role="tabpanel" aria-labelledby="settings-tab" value="packages">
                <div class="text-center py-12 text-gray-500">
                    <p>Package search coming soon...</p>
                </div>
            </div>
        </div>
    </div>
</div>